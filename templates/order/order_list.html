{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
  <h2 class="mb-4">Мої замовлення</h2>

  <ul class="nav nav-tabs" id="orderTabs" role="tablist">
    <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#shipped">У дорозі</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#new">Очікує оплату</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#delivered">Отримані</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#processing">Оформляється</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#cancelled">Скасовані</button></li>
  </ul>

  <div class="tab-content p-4 bg-white border border-top-0" id="orderTabsContent">

    <!-- У дорозі -->
    <div class="tab-pane fade show active" id="shipped">
      {% for order in orders_shipped %}
        <h5>Замовлення #{{ order.id }}</h5>
        <p>Товари: {{ order.total_items }} шт. — {{ order.total_price }}₴</p>
        <p><strong>Статус:</strong> У дорозі ({{ order.city }})</p>
        <p><strong>Очікується:</strong> {{ order.expected_date }}</p>
        <a href="{% url 'order:order' order.id %}" class="btn btn-primary btn-sm">Деталі</a>
        <hr>
      {% empty %}
        <p>Немає замовлень у дорозі.</p>
      {% endfor %}
    </div>

    <!-- Очікує оплату -->
    <div class="tab-pane fade" id="new">
      {% for order in orders_new %}
        <h5>Замовлення #{{ order.id }}</h5>
        <p>Товари: {{ order.total_items }} шт. — {{ order.total_price }}₴</p>
        <p><strong>Статус:</strong> Очікує оплату</p>
        <a href="#" class="btn btn-warning btn-sm">Оплатити зараз</a>
        <hr>
      {% empty %}
        <p>Немає неоплачених замовлень.</p>
      {% endfor %}
    </div>

    <!-- Доставлено -->
    <div class="tab-pane fade" id="delivered">
      {% for order in orders_delivered %}
        <h5>Замовлення #{{ order.id }}</h5>
        <p>Товари: {{ order.total_items }} шт. — {{ order.total_price }}₴</p>
        <p><strong>Статус:</strong> Доставлено {{ order.delivered_at|date:"d.m.Y" }}</p>
        <a href="#" class="btn btn-outline-primary btn-sm">Повторити</a>
        <hr>
      {% empty %}
        <p>Немає отриманих замовлень.</p>
      {% endfor %}
    </div>

    <!-- Оформляється -->
    <div class="tab-pane fade" id="processing">
      {% for order in orders_processing %}
        <h5>Замовлення #{{ order.id }}</h5>
        <p>Товари: {{ order.total_items }} шт. — {{ order.total_price }}₴</p>
        <p><strong>Статус:</strong> Очікує підтвердження</p>
        <a href="#" class="btn btn-success btn-sm">Завершити</a>
        <hr>
      {% empty %}
        <p>Немає замовлень, що оформляються.</p>
      {% endfor %}
    </div>

    <!-- Скасовані -->
    <div class="tab-pane fade" id="cancelled">
      {% for order in orders_order_failed %}
        <h5>Замовлення #{{ order.id }}</h5>
        <p>Товари: {{ order.good.title }}  шт. — {{ order.total_price }}₴</p>
        <p><strong>Статус:</strong> Скасоване</p>
        <hr>
      {% empty %}
        <p>Немає скасованих замовлень.</p>
      {% endfor %}
    </div>

  </div>
</div>
{% endblock %}
